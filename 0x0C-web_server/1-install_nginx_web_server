#!/usr/bin/env bash
# this is a hello world!
# Update package list and install Nginx
sudo apt-get update
sudo apt-get install -y nginx

# Create a string that contains "Hello World!"
echo "<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hello, World!</title>
</head>
<body>
    <h1>Hello, World!</h1>
</body>
</html>" | sudo tee /var/www/html/index.html

# Ensure Nginx is enabled and started
sudo systemctl enable nginx
sudo systemctl start nginx

# Check if Nginx is running and listening on port 80
if sudo systemctl status nginx | grep -q "active (running)"; then
	echo "yes"
else
    exit 1
fi

# Verify Nginx serves the "Hello World!" page
if curl -s http://localhost | grep -q "Hello World!"; then
	echo "yes"
else
    exit 1
fi
